{"version":3,"sources":["../../src/fun.js"],"names":["request","require","exports","fun","update","gender","location","date","callback","nowShowing","getContents","data","getClothes","contents","i","cloth","clothes","image","title","sort","lprice","result","console","log","url","qs","error","response","body","summary","weather","temp","info","JSON","parse","description","temperature"],"mappings":";;AAAA,IAAIA,UAAUC,QAAQ,SAAR,CAAd;;AAEAC,QAAQC,GAAR,GAAe,SAASC,MAAT,CAAgBC,MAAhB,EAAwBC,QAAxB,EAAkCC,IAAlC,EAAwCC,QAAxC,EAAkD;AAC7D,QAAIC,aAAa,EAAjB;AACAC,gBAAYL,MAAZ,EAAoBC,QAApB,EAA8BC,IAA9B,EAAoC,UAAUI,IAAV,EAAgB;AAChDF,sBAAcE,IAAd;AACAH,iBAASC,UAAT;AACH,KAHD;AAIH,CAND;;AAQA,SAASC,WAAT,CAAqBL,MAArB,EAA6BC,QAA7B,EAAuCC,IAAvC,EAA6CC,QAA7C,EAAuD;AACnDI,eAAWL,IAAX,EAAiBD,QAAjB,EAA2BD,MAA3B,EAAmC,UAAUM,IAAV,EAAgB;AAC/C,YAAIE,WAAW,EAAf;AACA,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,CAApB,EAAuBA,GAAvB,EAA4B;AACxB,gBAAIC,QAAQJ,KAAKK,OAAL,CAAaF,CAAb,CAAZ;AACAD,uBAAWA,mEAESE,MAAME,KAFf,uJAKWF,MAAMG,KALjB,6HAQcH,MAAMI,IARpB,2DAScJ,MAAMK,MATpB,oEAAX;AAYH;AACDZ,iBAASK,QAAT;AACH,KAlBD;AAmBH;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASD,UAAT,CAAoBL,IAApB,EAA0BD,QAA1B,EAAoCD,MAApC,EAA4CG,QAA5C,EAAsD;AAClD,QAAIa,SAAS,IAAb;AACA,QAAIV,OAAO;AACPJ,cAAMA,IADC;AAEPD,kBAAUA,QAFH;AAGPD,gBAAQA;AAHD,KAAX;;AAMAiB,YAAQC,GAAR,CAAYZ,IAAZ;AACC,eAAUU,MAAV,EAAkB;AACfrB,gBAAQ,EAACwB,KAAK,yCAAN,EAAiDC,IAAId,IAArD,EAAR,EAAoE,UAAUe,KAAV,EAAiBC,QAAjB,EAA2BC,IAA3B,EAAiC;AACjGC,oBAAQD,IAAR,EAAc,UAAUE,OAAV,EAAmBC,IAAnB,EAAyBf,OAAzB,EAAkC;AAC5CR,yBAAS,EAACsB,SAASA,OAAV,EAAmBC,MAAMA,IAAzB,EAA+Bf,SAASA,OAAxC,EAAT;AACH,aAFD;AAGH,SAJD;AAKH,KANA,EAMCK,MAND,CAAD;AAOH;;AAED,SAASQ,OAAT,CAAiBG,IAAjB,EAAuBxB,QAAvB,EAAiC;AAC7B,QAAIsB,UAAUG,KAAKC,KAAL,CAAWF,IAAX,EAAiBF,OAAjB,CAAyBA,OAAzB,CAAiC,CAAjC,EAAoCK,WAAlD;AACA,QAAIJ,OAAOE,KAAKC,KAAL,CAAWF,IAAX,EAAiBF,OAAjB,CAAyBM,WAApC;AACA,QAAIpB,UAAUiB,KAAKC,KAAL,CAAWF,IAAX,EAAiBjB,KAA/B;AACAP,aAASsB,OAAT,EAAkBC,IAAlB,EAAwBf,OAAxB;AACH;;AAED;;;;;;;;;kCAvDSN,W;;kCA8BAE,U;;kCAkBAiB,O","file":"fun.js","sourcesContent":["var request = require('request');\n\nexports.fun =  function update(gender, location, date, callback) {\n    var nowShowing = '';\n    getContents(gender, location, date, function (data) {\n        nowShowing += data;\n        callback(nowShowing);\n    });\n};\n\nfunction getContents(gender, location, date, callback) {\n    getClothes(date, location, gender, function (data) {\n        var contents = '';\n        for (var i = 0; i < 5; i++) {\n            var cloth = data.clothes[i];\n            contents = contents +\n                `<div class=\"card\">\n                    <img src=\"${cloth.image}\" alt=\"product\">\n                        <div class=\"info\">\n                            <div class=\"title\">\n                                ${cloth.title}\n                            </div>\n                            <br>\n                                종류:${cloth.sort}<br>\n                                가격:${cloth.lprice}원\n                        </div>\n                </div>`;\n        }\n        callback(contents);\n    });\n}\n\n//Connection with MYSQL\n// var client = mysql.createConnection({\n//     host: 'gmsgondr.net',\n//     user: 'info3',\n//     password: '1234',\n//     database: 'info3'\n// });\n\nfunction getClothes(date, location, gender, callback) {\n    var result = null;\n    var data = {\n        date: date,\n        location: location,\n        gender: gender\n    };\n\n    console.log(data);\n    (function (result) {\n        request({url: 'http://www.fashionup.co.kr/api/clothes?', qs: data}, function (error, response, body) {\n            summary(body, function (weather, temp, clothes) {\n                callback({weather: weather, temp: temp, clothes: clothes});\n            });\n        });\n    }(result));\n}\n\nfunction summary(info, callback) {\n    var weather = JSON.parse(info).weather.weather[0].description;\n    var temp = JSON.parse(info).weather.temperature;\n    var clothes = JSON.parse(info).cloth;\n    callback(weather, temp, clothes);\n}\n\n// module.exports = update();"]}